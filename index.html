<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>9XV4 - Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@32,400,0,0" />
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

  <style>
    /* ======== LOADING SCREEN STYLES ======== */
    .loading { 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%;
      background: black; 
      display: flex; 
      flex-direction: column;
      justify-content: center; 
      align-items: center; 
      z-index: 9999;
      will-change: opacity; 
      transition: background 0.5s ease-out; 
      padding: 0 20px;
      box-sizing: border-box;
    }
    
    .loading img {
      width: 220px; 
      height: 220px; 
      animation: rotate 5s linear forwards; 
      filter: drop-shadow(0 0 35px #3b82f6);
      transition: transform 2.0s ease-in-out, opacity 2.0s ease-in-out; 
      will-change: transform, opacity;
    }
    
    .loading-text {
      margin-top: 25px; 
      font-size: 14px; 
      letter-spacing: 3px; 
      color: #3b82f6;
      text-align: center; 
      font-family: 'Orbitron', sans-serif; 
      transition: opacity 0.4s ease-out; 
    }
    
    /* Teks WELCOME yang muncul satu per satu - DIATAS SHARINGAN */
    .welcome-text {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 28px;
      font-weight: 700;
      color: #3b82f6;
      text-shadow: 0 0 10px #3b82f6;
      letter-spacing: 3px;
      font-family: 'Orbitron', sans-serif;
      opacity: 0;
      transition: opacity 0.5s ease;
      white-space: nowrap;
      text-align: center;
      width: 100%;
      padding: 0 15px;
      box-sizing: border-box;
    }
    
    .welcome-text.show {
      opacity: 1;
    }
    
    .welcome-char {
      display: inline-block;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s forwards;
    }
    
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); } 
    }
    
    .loading.zoom-out { 
      background: #1a2238; 
    }
    
    .loading.zoom-out img { 
      transform: scale(100); 
      opacity: 0; 
    }
    
    .loading.zoom-out .loading-text { 
      opacity: 0; 
    }
    
    .loading.zoom-out .welcome-text { 
      opacity: 0; 
    }
    
    /* Untuk mobile */
    @media (max-width: 480px) {
      .welcome-text {
        font-size: 22px;
        letter-spacing: 2px;
      }
    }

    /* Untuk layar sangat kecil */
    @media (max-width: 360px) {
      .welcome-text {
        font-size: 20px;
        letter-spacing: 1px;
      }
    }

    /* ======== MAIN DASHBOARD STYLES ======== */
    :root {
      --bg: #0a0f1e;
      --card: #1a2238;
      --card-hover: #212b48;
      --text: #e2e8f0;
      --muted: #94a3b8;
      --primary: #3b82f6;
      --secondary: #06b6d4;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, var(--bg) 0%, #0f172a 100%);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* Menu Toggle Button */
    .menu-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text);
      width: 45px;
      height: 45px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1001;
      backdrop-filter: blur(12px);
      transition: all 0.3s ease;
    }
    
    .menu-toggle:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
    }
    
    .menu-toggle i {
      font-size: 20px;
    }

    /* Sidebar */
    .sidebar{
      width: 280px;
      background: rgba(26, 34, 56, 0.95);
      backdrop-filter: blur(12px);
      border-right: 1px solid rgba(255,255,255,0.1);
      padding: 25px 20px;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 1000;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
    }
    
    .sidebar.active {
      transform: translateX(0);
    }
    
    /* Overlay ketika sidebar aktif */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 999;
      display: none;
      backdrop-filter: blur(3px);
    }
    
    .sidebar-overlay.active {
      display: block;
    }

    /* Sidebar Header */
    .sidebar-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    /* Efek Instagram Story pada Logo */
    .logo-container {
      position: relative;
      width: 100px;
      height: 100px;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-ring {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        #ffffff 0%, 
        var(--primary) 30%, 
        var(--secondary) 60%, 
        #ffffff 100%
      );
      animation: rotate 3s linear infinite;
      padding: 4px;
    }

    .logo {
      width: 92px;
      height: 92px;
      border-radius: 50%;
      object-fit: cover;
      display: block;
      z-index: 1;
      position: relative;
      background: var(--card);
      border: 2px solid rgba(255,255,255,0.1);
    }

    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    
    .app-title{
      font-family:'Orbitron',sans-serif;
      font-size: 24px;
      font-weight:800;
      color:#fff;
      text-align:center;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }
    
    /* Gradien Border untuk Execution Mode */
    .access-info{
      font-size: 12px;
      text-align:center;
      color:#fff;
      background:rgba(255,255,255,0.05);
      padding: 8px 14px;
      border-radius:10px;
      margin-top: 5px;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .access-info::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, 
        #ffffff 0%, 
        var(--primary) 30%, 
        var(--secondary) 60%, 
        #ffffff 100%);
      border-radius: 12px;
      z-index: -1;
      animation: borderGlow 3s linear infinite;
      background-size: 400% 400%;
    }
    
    @keyframes borderGlow {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    
    /* Sidebar Navigation - Floating Card Style */
    .nav-menu {
      list-style: none;
      margin-top: 25px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .nav-item {
      margin-bottom: 0;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 18px;
      color: var(--text);
      text-decoration: none;
      border-radius: 16px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      background: linear-gradient(135deg, 
        rgba(26, 34, 56, 0.8), 
        rgba(20, 28, 45, 0.9));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    /* Gradient border effect */
    .nav-link::before {
      content: '';
      position: absolute;
      inset: -1px;
      padding: 1px;
      border-radius: 17px;
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.3),
        rgba(6, 182, 212, 0.2),
        rgba(139, 92, 246, 0.2)
      );
      -webkit-mask: 
        linear-gradient(#fff 0 0) content-box, 
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }

    /* Hover effect */
    .nav-link:hover {
      background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.15), 
        rgba(6, 182, 212, 0.1));
      transform: translateX(8px) translateY(-2px);
      box-shadow: 
        0 8px 20px rgba(59, 130, 246, 0.2),
        0 4px 12px rgba(0, 0, 0, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      border-color: rgba(59, 130, 246, 0.2);
    }

    .nav-link:hover::before {
      opacity: 1;
    }

    /* Active state */
    .nav-link.active {
      background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.25), 
        rgba(6, 182, 212, 0.2));
      border-color: rgba(59, 130, 246, 0.3);
      transform: translateX(8px);
      box-shadow: 
        0 6px 18px rgba(59, 130, 246, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .nav-link.active::before {
      opacity: 1;
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.5),
        rgba(6, 182, 212, 0.4),
        rgba(139, 92, 246, 0.4)
      );
    }

    /* Icon styling */
    .nav-link i {
      font-size: 18px;
      width: 24px;
      text-align: center;
      color: rgba(59, 130, 246, 0.9);
      transition: all 0.3s ease;
    }

    .nav-link:hover i,
    .nav-link.active i {
      color: var(--primary);
      transform: scale(1.1);
      filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.3));
    }

    /* Text styling */
    .nav-link span {
      background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0.9), 
        rgba(226, 232, 240, 0.8));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 500;
      letter-spacing: 0.2px;
    }

    .nav-link:hover span,
    .nav-link.active span {
      background: linear-gradient(90deg, 
        var(--primary), 
        var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 600;
    }

    /* Subtle indicator */
    .nav-link::after {
      content: '';
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      opacity: 0;
      transition: opacity 0.3s ease;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }

    .nav-link:hover::after,
    .nav-link.active::after {
      opacity: 1;
    }

    /* For external links (Telegram, WhatsApp) */
    .nav-link[href*="http"] {
      border-style: dashed;
      border-width: 1.5px;
    }

    .nav-link[href*="http"]:hover {
      border-style: solid;
    }

    /* Responsive adjustments */
    @media (max-width: 1023px) {
      .nav-link {
        padding: 14px 16px;
        font-size: 14px;
      }
      
      .nav-link:hover,
      .nav-link.active {
        transform: translateX(5px) translateY(-2px);
      }
    }

    /* Main Content */
    .main-content{
      flex:1;
      padding: 30px 40px 40px;
      transition: margin-left 0.3s ease;
    }
    
    /* Server Status Banner - Full Width dengan Video */
    .server-banner {
      border-radius: 18px;
      margin: 20px auto 30px;
      position: relative;
      overflow: hidden;
      min-height: 250px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      background: linear-gradient(135deg, var(--card) 0%, var(--bg) 100%);
    }

    .banner-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      opacity: 0.3;
    }

    /* Overlay tipis biar video tetap kelihatan jelas */
    .server-banner::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(10, 15, 30, 0.9) 0%, rgba(10, 15, 30, 0.5) 100%);
      z-index: 1;
    }

    /* teks ke bawah kiri */
    .banner-content {
      position: absolute;
      bottom: 15px;
      left: 25px;
      z-index: 2;
      text-align: left;
    }

    .banner-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 24px;
      font-weight: 800;
      color: #fff;
      margin-bottom: 5px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .banner-subtitle {
      font-size: 13px;
      color: var(--text);
      opacity: 0.9;
      margin-bottom: 3px;
    }

    .banner-time {
      color: #ffff;
      font-size: 12px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* status indikator ke kanan bawah */
    .status-indicator {
      position: absolute;
      bottom: 15px;
      right: 25px;
      z-index: 2;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--success);
      font-size: 13px;
      font-weight: 600;
      background: rgba(0,0,0,0.4);
      padding: 8px 16px;
      border-radius: 25px;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    /* titik status animasi */
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--success);
      box-shadow: 0 0 10px var(--success);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      70% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
      100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
      }
    }

    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
      padding-bottom:20px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    
    .header-title{
      font-family:'Orbitron',sans-serif;
      font-size:32px;
      font-weight:800;
      color:#fff;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    /* Page Container */
    .page {
      display: none;
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .page.active {
      display: block;
    }
    
    /* Dashboard Grid */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }
    
    .dashboard-card {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 28px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    .dashboard-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 18px 18px 0 0;
    }
    
    .dashboard-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(59, 130, 246, 0.3);
      background: var(--card-hover);
    }
    
    .card-icon {
      font-size: 40px;
      margin-bottom: 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .card-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 20px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 10px;
    }
    
    .card-desc {
      color: var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }
    
    /* Form Section */
    .form-section {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 28px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .form-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 18px 18px 0 0;
    }

    .section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .section-title i {
      color: var(--primary);
      font-size: 24px;
    }

    .label {
      color: var(--text);
      font-size: 16px;
      margin-bottom: 8px;
      font-weight: 600;
      display: flex;
      align-items: center;
    }

    .label i {
      margin-right: 8px;
      color: var(--primary);
    }

    .input-box {
      width: 100%;
      padding: 12px 15px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: white;
      border-radius: 12px;
      margin-bottom: 20px;
      outline: none;
      transition: all 0.3s;
      font-size: 15px;
    }

    .input-box:focus {
      border-color: var(--secondary);
      box-shadow: 0 0 15px var(--primary);
      transform: translateY(-2px);
    }

    .input-hint {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 5px;
      margin-bottom: 15px;
    }

    /* Action Button */
    .action-btn-form {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      margin-top: 15px;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
      letter-spacing: 0.5px;
    }

    .action-btn-form:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.6);
    }

    .action-btn-form:active {
      transform: translateY(1px);
    }

    /* Preview Section */
    .preview-area {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 28px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
      text-align: center;
      display: none;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .preview-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      border-radius: 18px 18px 0 0;
    }

    .preview-area img {
      max-width: 100%;
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: 0 0 25px rgba(59, 130, 246, 0.2);
    }

    .download-btn {
      display: inline-block;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 10px 25px;
      border-radius: 10px;
      color: white;
      text-decoration: none;
      font-weight: 600;
      transition: 0.3s;
    }

    .download-btn:hover {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
      transform: translateY(-2px);
    }

    /* Loading & Error */
    .loading {
      display: none;
      text-align: center;
      margin-top: 15px;
      color: var(--secondary);
      font-weight: 600;
      text-shadow: 0 0 10px var(--secondary);
    }

    .error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ff6b6b;
      padding: 12px;
      border-radius: 10px;
      margin-top: 15px;
      display: none;
      text-align: center;
    }

    /* Info Section */
    .info-section {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 28px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .info-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      border-radius: 18px 18px 0 0;
    }

    .info-content {
      line-height: 1.6;
    }

    .info-content h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 18px;
      font-weight: 600;
    }

    .info-content p {
      margin-bottom: 15px;
      font-size: 14px;
      color: var(--text);
    }

    .info-content ul {
      margin-left: 20px;
      margin-bottom: 15px;
    }

    .info-content li {
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--text);
    }

    .info-content .highlight {
      color: var(--primary);
      font-weight: 600;
    }

    .warning-box {
      background: rgba(239, 68, 68, 0.1);
      border-left: 4px solid var(--error);
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .warning-box p {
      margin: 0;
      color: #ff9999;
      font-size: 14px;
    }

    .note-box {
      background: rgba(6, 182, 212, 0.1);
      border-left: 4px solid var(--secondary);
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .note-box p {
      margin: 0;
      color: #7dd3fc;
      font-size: 14px;
    }

    /* QR Code Styling */
    .qrcode-container {
      margin-top: 25px;
      text-align: center;
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    #qrcode {
      padding: 20px;
      background: white;
      border-radius: 15px;
      display: inline-block;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    
    #qrcode canvas {
      border-radius: 10px;
    }

    /* Chat AI Styling */
    .chat-container {
      overflow-y: auto;
      padding: 32px 0 60px;
      height: calc(100vh - 127px);
      scrollbar-color: var(--scrollbar-color) transparent;
    }

    .chat-container :where(.app-header, .suggestions, .message, .prompt-wrapper) {
      position: relative;
      margin: 0 auto;
      width: 100%;
      padding: 0 20px;
      max-width: 990px;
    }

    .chat-container .app-header {
      margin-top: 3vh;
      text-align: center;
    }

    .app-header .heading {
      font-size: 3rem;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .app-header .sub-heading {
      font-size: 1.5rem;
      color: var(--muted);
    }

    .chat-container .suggestions {
      width: 100%;
      list-style: none;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 9.5vh;
    }

    .suggestions .suggestions-item {
      cursor: pointer;
      padding: 18px;
      height: 120px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      border-radius: 16px;
      justify-content: space-between;
      background: var(--card);
      transition: 0.3s ease;
      border: 1px solid rgba(59, 130, 246, 0.2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .suggestions .suggestions-item:hover {
      background: var(--card-hover);
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(59, 130, 246, 0.3);
    }

    .suggestions .suggestions-item .text {
      font-size: 1.1rem;
      font-weight: 500;
    }

    .suggestions .suggestions-item .icon {
      width: 45px;
      height: 45px;
      display: flex;
      font-size: 1.4rem;
      align-self: flex-end;
      align-items: center;
      border-radius: 50%;
      justify-content: center;
      color: var(--primary);
      background: var(--card);
    }

    .chats-container {
      display: flex;
      gap: 20px;
      flex-direction: column;
    }

    .chats-container .message {
      display: flex;
      gap: 11px;
      align-items: flex-start;
      animation: messageAppear 0.3s ease-out;
    }

    @keyframes messageAppear {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .chats-container .bot-message {
      margin: 9px auto;
    }

    .chats-container .user-message {
      flex-direction: column;
      align-items: flex-end;
    }

    .chats-container .user-message .message-text {
      padding: 12px 16px;
      max-width: 85%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 18px 18px 4px 18px;
      word-break: break-word;
      color: white;
      box-shadow: 0 4px 6px rgba(59, 130, 246, 0.2);
    }

    .chats-container .user-message .img-attachment {
      margin-top: -7px;
      width: 50%;
      border-radius: 13px 3px 13px 13px;
      max-width: 100%;
    }

    .chats-container .user-message .file-attachment {
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 10px;
      margin-top: -7px;
      border-radius: 13px 3px 13px 13px;
      background: var(--card);
      max-width: 85%;
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .chats-container .user-message .file-attachment span {
      color: var(--primary);
    }

    .prompt-container {
      position: fixed;
      width: 100%;
      left: 0;
      bottom: 0;
      padding: 16px 0;
      background: var(--card);
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .prompt-container :where(.prompt-wrapper, .prompt-form, .prompt-actions) {
      display: flex;
      gap: 12px;
      height: 56px;
      align-items: center;
    }

    .prompt-container .prompt-form {
      height: 100%;
      width: 100%;
      border-radius: 28px;
      background: var(--card);
      border: 1px solid rgba(59, 130, 246, 0.2);
      transition: all 0.3s ease;
    }

    .prompt-form:focus-within {
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
    }

    .prompt-form .prompt-input {
      width: 100%;
      height: 100%;
      background: none;
      outline: none;
      border: none;
      font-size: 1rem;
      color: var(--text);
      padding-left: 24px;
    }

    .prompt-form .prompt-input::placeholder {
      color: var(--muted);
    }

    .prompt-wrapper button {
      width: 56px;
      height: 100%;
      flex-shrink: 0;
      cursor: pointer;
      border-radius: 50%;
      font-size: 1.4rem;
      border: none;
      color: var(--text);
      background: var(--card);
      transition: 0.3s ease;
      border: 1px solid rgba(59, 130, 246, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .prompt-wrapper :is(button:hover, #cancel-file-btn, .file-icon) {
      background: var(--card-hover);
    }

    .prompt-form .prompt-actions {
      gap: 5px;
      margin-right: 7px;
    }

    .prompt-wrapper .prompt-form :where(.file-upload-wrapper, button, img) {
      position: relative;
      height: 45px;
      width: 45px;
    }

    .prompt-form .prompt-actions #send-prompt-btn {
      color: #fff;
      display: none;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
    }

    .prompt-form .prompt-input:valid~.prompt-actions #send-prompt-btn {
      display: flex;
    }

    .prompt-form #send-prompt-btn:hover {
      transform: scale(1.05);
    }

    .prompt-form .file-upload-wrapper :where(button, img) {
      display: none;
      border-radius: 50%;
      object-fit: cover;
      position: absolute;
    }

    .prompt-form .file-upload-wrapper.active #add-file-btn {
      display: none;
    }

    .prompt-form .file-upload-wrapper #add-file-btn,
    .prompt-form .file-upload-wrapper.active.img-attached img,
    .prompt-form .file-upload-wrapper.active.file-attached .file-icon,
    .prompt-form .file-upload-wrapper.active:hover #cancel-file-btn {
      display: flex;
    }

    .prompt-form :is(#stop-response-btn:hover, #cancel-file-btn) {
      color: var(--secondary);
    }

    .prompt-wrapper .prompt-form .file-icon {
      color: var(--primary);
    }

    .prompt-form #stop-response-btn,
    body.bot-responding .prompt-form .file-upload-wrapper {
      display: none;
    }

    body.bot-responding .prompt-form #stop-response-btn {
      display: flex;
    }

    /* FORMATTING TEKS YANG LEBIH BAIK */
    .message-content {
      line-height: 1.7;
      font-size: 15px;
      color: var(--text);
      padding: 15px;
      background: var(--card);
      border-radius: 18px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.1);
    }

    .message-content p {
      margin-bottom: 16px;
      word-spacing: 0.5px;
      letter-spacing: 0.2px;
    }

    .message-content p:last-child {
      margin-bottom: 0;
    }

    .message-content strong {
      font-weight: 700;
      color: inherit;
    }

    .message-content em {
      font-style: italic;
      color: inherit;
    }

    .message-content h1, .message-content h2, .message-content h3, 
    .message-content h4, .message-content h5, .message-content h6 {
      margin: 20px 0 12px 0;
      font-weight: 600;
      line-height: 1.3;
      color: inherit;
    }

    .message-content h1 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--muted);
      padding-bottom: 8px;
    }

    .message-content h2 {
      font-size: 1.35em;
    }

    .message-content h3 {
      font-size: 1.2em;
    }

    .message-content h4 {
      font-size: 1.1em;
    }

    .message-content h5 {
      font-size: 1.05em;
    }

    .message-content h6 {
      font-size: 1em;
      color: var(--muted);
    }

    .message-content ul, .message-content ol {
      margin: 12px 0;
      padding-left: 24px;
    }

    .message-content li {
      margin-bottom: 6px;
      padding-left: 4px;
    }

    .message-content blockquote {
      border-left: 4px solid var(--primary);
      margin: 16px 0;
      padding: 12px 16px;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 0 8px 8px 0;
      font-style: italic;
    }

    .message-content table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      background: var(--card);
      border-radius: 8px;
      overflow: hidden;
    }

    .message-content th, .message-content td {
      padding: 10px 12px;
      border: 1px solid var(--card-hover);
      text-align: left;
    }

    .message-content th {
      background: var(--card-hover);
      font-weight: 600;
    }

    .message-content code {
      background: rgba(59, 130, 246, 0.1);
      color: var(--primary);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', monospace;
      font-size: 0.85em;
    }

    .message-content pre {
      background: var(--card);
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
      overflow-x: auto;
      border: 1px solid var(--card-hover);
      position: relative;
      white-space: pre;
      tab-size: 4;
      line-height: 1.5;
    }

    .message-content pre code {
      background: none;
      padding: 0;
      font-size: 0.9em;
      line-height: inherit;
      display: block;
      white-space: pre;
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', monospace;
      color: var(--text);
    }

    .message-content a {
      color: var(--primary);
      text-decoration: none;
    }

    .message-content a:hover {
      text-decoration: underline;
      color: var(--secondary);
    }

    /* TikTok Downloader Styling */
    .progress-container {
      margin-top: 1.5rem;
      display: none;
      position: relative;
      z-index: 1;
    }

    .progress-bar {
      height: 10px;
      background: rgba(51, 65, 85, 0.8);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 0.8rem;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    .progress {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 10px;
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
    }

    .progress-text {
      font-size: 0.95rem;
      color: var(--muted);
      text-align: center;
      font-weight: 500;
    }
    
    .result-section {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      max-width: 700px;
      width: 100%;
      position: relative;
      overflow: hidden;
      animation: fadeIn 0.8s ease;
      margin: 0 auto 30px;
      display: none;
    }
    
    .result-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      border-radius: 18px 18px 0 0;
    }
    
    .result-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .result-title i {
      color: var(--primary);
      font-size: 24px;
    }

    .video-info {
      background: rgba(30, 41, 59, 0.6);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .video-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #e2e8f0;
      margin-bottom: 0.5rem;
    }

    .download-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .download-option {
      padding: 1.5rem;
      border-radius: 16px;
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.2),
        rgba(6, 182, 212, 0.2)
      );
      border: 2px solid rgba(255, 255, 255, 0.1);
      color: #e2e8f0;
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.8rem;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .download-option:hover {
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.3),
        rgba(6, 182, 212, 0.3)
      );
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
      border-color: var(--primary);
    }

    .download-option i {
      font-size: 2rem;
      color: var(--primary);
    }

    .download-option span {
      font-weight: 600;
      font-size: 1.05rem;
    }
    
    .features-section {
      background: var(--card);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      max-width: 700px;
      width: 100%;
      position: relative;
      overflow: hidden;
      animation: fadeIn 0.8s ease;
      margin: 0 auto;
    }
    
    .features-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 18px 18px 0 0;
    }
    
    .features-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .features-title i {
      color: var(--primary);
      font-size: 24px;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .feature-card {
      background: linear-gradient(
        135deg,
        rgba(30, 41, 59, 0.6),
        rgba(15, 23, 42, 0.8)
      );
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      cursor: pointer;
    }

    .feature-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 40px rgba(59, 130, 246, 0.3);
      border-color: var(--primary);
    }

    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 1.2rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .feature-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.8rem;
      color: #e2e8f0;
    }

    .feature-desc {
      color: var(--muted);
      font-size: 1rem;
      line-height: 1.6;
    }
    
    .error-message,
    .success-message {
      background-color: rgba(0, 0, 0, 0.25);
      padding: 1rem 1.2rem;
      border-radius: 16px;
      margin-top: 1rem;
      font-weight: 500;
      position: relative;
      z-index: 1;
      max-height: 100px;
      overflow: hidden;
      transition: opacity 0.5s ease, max-height 0.5s ease;
    }

    .error-message {
      background: rgba(239, 68, 68, 0.15);
      border: 2px solid rgba(239, 68, 68, 0.4);
      color: #fca5a5;
    }

    .success-message {
      background: rgba(34, 197, 94, 0.15);
      border: 2px solid rgba(34, 197, 94, 0.4);
      color: #86efac;
    }

    .error-message.hide,
    .success-message.hide {
      opacity: 0;
      max-height: 0;
      padding: 0;
      border: none;
      margin: 0;
    }

    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* NGL Spam Tool Styling */
    .user-stats-card {
      width: 100%;
      max-width: 450px;
      margin-bottom: 35px;
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .stats-card {
      border-radius: 18px;
      overflow: hidden;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12));
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      position: relative;
      padding: 0;
      width: 100%;
      margin: 0 auto;
    }
    
    .stats-card .header-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 15px;
      background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
      border-bottom: 4px solid rgba(255,255,255,0.02);
    }
    
    .stats-card .header-icon h3 {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      font-size: 16px;
      letter-spacing: 0.6px;
      color: #fff;
      text-align: center;
    }
    
    .user-icon {
      position: relative;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
    }
    
    .user-icon .fa-user-group {
      font-size: 24px;
      color: #fff;
      filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
    }
    
    .stats-card .body {
      padding: 15px;
      background: linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, rgba(6, 182, 212, 0.2) 100%);
      position: relative;
    }
    
    .user-info-compact {
      display: flex;
      flex-direction: column;
      gap: 0;
      font-family: 'Poppins', monospace;
      font-size: 14px;
      position: relative;
    }
    
    .info-row {
      display: flex;
      align-items: center;
      padding: 8px 0;
      position: relative;
    }
    
    .info-label {
      flex: 0 0 90px;
      font-weight: 700;
      color: rgba(255,255,255,0.9);
    }
    
    .info-separator {
      margin: 0 8px;
      color: rgba(255,255,255,0.5);
      z-index: 2;
    }
    
    .info-value {
      flex: 1;
      font-family: 'Orbitron', sans-serif;
      color: #e6e6e6;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .vertical-line {
      position: absolute;
      left: 97px;
      top: 0;
      bottom: 0;
      width: 1px;
      background: rgba(255,255,255,0.3);
      z-index: 1;
    }
    
    .horizontal-line {
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background: rgba(255,255,255,0.3);
      z-index: 1;
    }
    
    .horizontal-line.top {
      top: 50%;
      transform: translateY(-50%);
    }
    
    .limit-info {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 25px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }

    .limit-info::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      border-radius: 12px 12px 0 0;
    }

    .limit-header {
      text-align: center;
      margin-bottom: 15px;
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      color: #fff;
    }

    .limit-row {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      padding: 10px;
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .limit-label {
      color: #bbb;
      font-weight: 500;
    }

    .limit-value {
      color: var(--muted);
      font-weight: bold;
    }

    .limit-value.warning {
      color: var(--warning);
    }

    .limit-value.danger {
      color: var(--error);
    }
    
    .quick-stats {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      padding: 25px;
      margin-bottom: 25px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      animation: fadeInUp 0.6s ease forwards;
    }

    .quick-stats::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 18px 18px 0 0;
    }
    
    .quick-stats h3 {
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      margin: 0 0 20px 0;
      text-align: center;
      font-size: 20px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 18px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.1);
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-5px);
    }
    
    .stat-card .stat-label {
      font-size: 12px;
      color: #bbb;
      margin-bottom: 8px;
    }
    
    .stat-card .stat-number {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 8px;
      font-family: 'Orbitron', sans-serif;
    }
    
    .stat-card .stat-progress {
      background: rgba(0,0,0,0.3);
      height: 6px;
      border-radius: 3px;
      overflow: hidden;
    }
    
    .stat-card .stat-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 3px;
    }
    
    .guide-btn {
      display: inline-block;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 12px 25px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      text-align: center;
      margin-bottom: 20px;
      font-family: 'Poppins', sans-serif;
    }
    
    .guide-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.4);
    }
    
    .logs {
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 12px;
      margin-top: 25px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,0.1);
      position: relative;
    }
    
    .logs::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 12px 12px 0 0;
    }
    
    .log-success { color: var(--success); }
    .log-error { color: var(--error); }
    .log-info { color: #ffffff; }
    .log-warning { color: var(--warning); }
    
    .stats {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
    }

    .stats::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      border-radius: 12px 12px 0 0;
    }
    
    .stat-item {
      text-align: center;
      flex: 1;
    }
    
    .stat-value {
      font-size: 26px;
      font-weight: bold;
      margin-bottom: 5px;
      font-family: 'Orbitron', sans-serif;
    }
    
    .progress-bar {
      width: 100%;
      height: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      margin-top: 15px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.3s ease;
      border-radius: 6px;
    }
    
    .back-btn {
      background: rgba(255, 255, 255, 0.1);
      margin-top: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      color: white;
      padding: 14px 25px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      width: 100%;
      text-align: center;
      text-decoration: none;
      display: block;
    }
    
    .back-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }

    /* Animation for menu items */
    @keyframes slideInFromLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .nav-item {
      animation: slideInFromLeft 0.5s ease forwards;
      animation-delay: calc(var(--item-index, 0) * 0.05s);
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* Responsive */
    @media (min-width: 1024px) {
      .sidebar {
        transform: translateX(0);
      }
      .main-content {
        margin-left: 280px;
      }
      .menu-toggle {
        display: none;
      }
    }
    
    @media (max-width: 1023px) {
      .main-content {
        margin-left: 0;
        padding: 15px 20px 80px;
      }
      .header-title {
        font-size: 24px;
      }
      .server-banner {
        min-height: 200px;
      }
      .banner-content {
        left: 15px;
        bottom: 10px;
      }
      .status-indicator {
        right: 15px;
        bottom: 10px;
      }
      .dashboard-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
      .suggestions {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .form-section, .info-section {
        padding: 20px;
      }
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      .stats-grid {
        grid-template-columns: 1fr;
      }
      .stats {
        flex-direction: column;
        gap: 15px;
      }
      .stat-item {
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading" id="loading">
    <div class="welcome-text" id="welcome-text"></div>
    <img src="https://e.top4top.io/p_3600kaeln0.png" alt="Sharingan"> 
    <div class="loading-text">JANGAN PERNAH MENYERAH - 9XV4 -</div>
  </div>

  <!-- Menu Toggle Button -->
  <div class="menu-toggle" id="menuToggle">
    <i class="fas fa-bars"></i>
  </div>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <!-- Logo dengan efek Instagram Story -->
      <div class="logo-container">
        <div class="logo-ring"></div>
        <img src="https://f.top4top.io/p_3602ft4aa0.jpg" class="logo" alt="9XV4 Logo">
      </div>
      <div class="app-title">9XV4 (OWNER)</div>
      <div class="access-info"><b><i>Dashboard Mode</i></b></div>
    </div>
    
    <ul class="nav-menu">
      <li class="nav-item"><a class="nav-link active" data-page="dashboard"><i class="fas fa-tachometer-alt"></i>Dashboard</a></li>
      <li class="nav-item"><a class="nav-link" data-page="profile"><i class="fas fa-user"></i>Profile</a></li>
      <li class="nav-item"><a href="https://te.me/MelissaPutrial" class="nav-link"><i class="fab fa-telegram"></i>Telegram</a></li>
      <li class="nav-item"><a href="https://wa.me/62896992036300" class="nav-link"><i class="fab fa-whatsapp"></i>WhatsApp</a></li>
      <li class="nav-item"><a class="nav-link" data-page="chat-ai"><i class="fas fa-robot"></i>Chat AI</a></li>
      <li class="nav-item"><a class="nav-link" data-page="execution"><i class="fas fa-bolt"></i>Execution</a></li>
      <li class="nav-item"><a class="nav-link" data-page="qr-generator"><i class="fas fa-qrcode"></i>QR Generator</a></li>
      <li class="nav-item"><a class="nav-link" data-page="tiktok"><i class="fab fa-tiktok"></i>TikTok Downloader</a></li>
      <li class="nav-item"><a class="nav-link" data-page="iphone-quote"><i class="fas fa-mobile-alt"></i>iPhone Quote</a></li>
      <li class="nav-item"><a class="nav-link" data-page="ngl-spam"><i class="fas fa-message"></i>Spam NGL</a></li>
      <!-- Menu Baru dari Kode Kedua -->
      <li class="nav-item"><a class="nav-link" data-page="send-account"><i class="fas fa-paper-plane"></i>Kirim Data Akun</a></li>
      <li class="nav-item"><a class="nav-link" data-page="user-approval"><i class="fas fa-user-check"></i>Approve User</a></li>
      <li class="nav-item"><a class="nav-link" data-page="topup-approval"><i class="fas fa-money-bill-wave"></i>Approve Top Up</a></li>
      <!-- Tombol Logout dihapus -->
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Server Status Banner - Full Width dengan Video -->
    <div class="server-banner">
      <video class="banner-video" autoplay muted loop playsinline>
<video src="KOTOM.mp4" autoplay loop muted playsinline></video>
        Your browser does not support the video tag.
      </video>
      <div class="banner-content">
        <div class="banner-title">9XV4</div>
        <div class="banner-time">
          <i class="fas fa-clock"></i>
          <span id="currentTime">Loading...</span>
        </div>
      </div>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>Online</span>
      </div>
    </div>

    <!-- Dashboard Page -->
    <div class="page active" id="dashboard-page">
      <div class="header">
        <h1 class="header-title">Dashboard</h1>
      </div>
      
      <div class="dashboard-grid">
        <div class="dashboard-card" data-page="iphone-quote">
          <div>
            <div class="card-icon">
              <i class="fas fa-mobile-alt"></i>
            </div>
            <div class="card-title">iPhone Quote Generator</div>
            <div class="card-desc">Buat screenshot chat iPhone palsu dengan mudah</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="chat-ai">
          <div>
            <div class="card-icon">
              <i class="fas fa-robot"></i>
            </div>
            <div class="card-title">Chat AI Assistant</div>
            <div class="card-desc">Dapatkan bantuan dari AI dengan berbagai pertanyaan</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="qr-generator">
          <div>
            <div class="card-icon">
              <i class="fas fa-qrcode"></i>
            </div>
            <div class="card-title">QR Code Generator</div>
            <div class="card-desc">Buat QR Code dari teks atau URL dengan mudah</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="tiktok">
          <div>
            <div class="card-icon">
              <i class="fab fa-tiktok"></i>
            </div>
            <div class="card-title">TikTok Downloader</div>
            <div class="card-desc">Download video TikTok tanpa watermark</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="ngl-spam">
          <div>
            <div class="card-icon">
              <i class="fas fa-message"></i>
            </div>
            <div class="card-title">NGL Spam Tool</div>
            <div class="card-desc">Kirim pesan ke NGL.link dengan mudah</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="execution">
          <div>
            <div class="card-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="card-title">Execution</div>
            <div class="card-desc">Tools eksekusi untuk berbagai keperluan</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>

        <!-- Menu Baru dari Kode Kedua -->
        <div class="dashboard-card" data-page="send-account">
          <div>
            <div class="card-icon">
              <i class="fas fa-paper-plane"></i>
            </div>
            <div class="card-title">Kirim Data Akun</div>
            <div class="card-desc">Kirim data akun ke pembeli</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="user-approval">
          <div>
            <div class="card-icon">
              <i class="fas fa-user-check"></i>
            </div>
            <div class="card-title">Approve User</div>
            <div class="card-desc">Kelola persetujuan pengguna</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="dashboard-card" data-page="topup-approval">
          <div>
            <div class="card-icon">
              <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="card-title">Approve Top Up</div>
            <div class="card-desc">Kelola persetujuan top up</div>
          </div>
          <div style="text-align: right; color: var(--secondary); font-size: 14px;">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- iPhone Quote Generator Page -->
    <div class="page" id="iphone-quote-page">
      <div class="header">
        <h1 class="header-title">iPhone Quote Generator</h1>
      </div>

      <!-- Form Section -->
      <div class="form-section">
        <h2 class="section-title">
          <i class="fas fa-quote-right"></i>
          Quote Generator Panel
        </h2>
        
        <div class="label">
          <i class="fas fa-clock"></i> Jam
        </div>
        <input type="text" class="input-box" id="time" placeholder="18:00" required>
        <div class="input-hint">Format: HH:MM</div>

        <div class="label">
          <i class="fas fa-battery-half"></i> Persentase Baterai
        </div>
        <input type="number" class="input-box" id="battery" placeholder="40" min="0" max="100" required>
        <div class="input-hint">Angka 0-100</div>

        <div class="label">
          <i class="fas fa-signal"></i> Nama Provider
        </div>
        <input type="text" class="input-box" id="carrier" placeholder="Telkomsel" required>

        <div class="label">
          <i class="fas fa-comment"></i> Pesan
        </div>
        <textarea class="input-box" id="message" placeholder="Haii bang" required style="min-height: 100px; resize: vertical;"></textarea>

        <button class="action-btn-form" id="generateBtn">
          <i class="fas fa-rocket"></i> GENERATE QUOTE
        </button>
        
        <div class="loading" id="loading"> Sedang membuat gambar...</div>
        <div class="error" id="error"></div>
      </div>

      <!-- Preview Section -->
      <div class="preview-area" id="previewArea">
        <img id="previewImage" alt="Preview">
        <br>
        <a href="#" class="download-btn" id="downloadBtn" download="iphone-quote.png">Download</a>
      </div>

      <!-- Information Section -->
      <div class="info-section">
        <h2 class="section-title">
          <i class="fas fa-info-circle"></i>
          Panduan Penggunaan
        </h2>
        <div class="info-content">
          <h3>    </h3>
          <p>Panel ini memungkinkan Anda untuk membuat screenshot chat iPhone palsu dengan mudah. Berikut adalah panduan lengkapnya:</p>
          
          <ul>
            <li><span class="highlight">Jam</span>: Masukkan waktu yang ingin ditampilkan pada screenshot (format: HH:MM)</li>
            <li><span class="highlight">Persentase Baterai</span>: Tentukan persentase baterai iPhone (0-100)</li>
            <li><span class="highlight">Nama Provider</span>: Masukkan nama operator seluler yang ingin ditampilkan</li>
            <li><span class="highlight">Pesan</span>: Tulis pesan yang ingin ditampilkan dalam screenshot</li>
            <li><span class="highlight">Proses pembuatan</span>: biasanya memakan waktu 5-10 detik tergantung pada koneksi internet.</li>
          </ul>
          
          <div class="note-box">
            <p><i class="fas fa-lightbulb"></i> <strong>Tips:</strong> Untuk hasil terbaik, gunakan nama provider yang sesuai dengan wilayah Anda dan pesan yang natural.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat AI Page -->
    <div class="page" id="chat-ai-page">
      <div class="header">
        <h1 class="header-title">AI Assistant</h1>
      </div>

      <div class="chat-container">
        <!-- App Header -->
        <header class="app-header">
          <h1 class="heading">Halo, selamat datang!</h1>
          <h4 class="sub-heading">Ada yang bisa saya bantu?</h4>
        </header>

        <!-- Suggestions List -->
        <ul class="suggestions">
          <li class="suggestions-item">
            <p class="text">Apa cuaca hari ini?</p>
            <span class="icon material-symbols-rounded">cloud</span>
          </li>
          <li class="suggestions-item">
            <p class="text">Rekomendasi film terbaru</p>
            <span class="icon material-symbols-rounded">movie</span>
          </li>
          <li class="suggestions-item">
            <p class="text">Cara membuat kue bolu</p>
            <span class="icon material-symbols-rounded">cake</span>
          </li>
          <li class="suggestions-item">
            <p class="text">Tips belajar yang efektif</p>
            <span class="icon material-symbols-rounded">school</span>
          </li>
        </ul>

        <!-- Chats -->
        <div class="chats-container"></div>

        <!-- Prompt Input -->
        <div class="prompt-container">
          <div class="prompt-wrapper">
            <form action="#" class="prompt-form">
              <input type="text" placeholder="Tanyakan sesuatu..." class="prompt-input" required />
              <div class="prompt-actions">
                <!-- File Upload Wrapper -->
                <div class="file-upload-wrapper">
                  <img src="#" class="file-preview" />
                  <input id="file-input" type="file" accept="image/*, .pdf, .txt, .csv" hidden />
                  <button type="button" class="file-icon material-symbols-rounded">description</button>
                  <button id="cancel-file-btn" type="button" class="material-symbols-rounded">close</button>
                  <button id="add-file-btn" type="button" class="material-symbols-rounded">attach_file</button>
                </div>

                <!-- Send Prompt and Stop Response Buttons -->
                <button id="stop-response-btn" type="button" class="material-symbols-rounded">stop_circle</button>
                <button id="send-prompt-btn" class="material-symbols-rounded">arrow_upward</button>
              </div>
            </form>

            <!-- Theme and Delete Chats Buttons -->
            <button id="theme-toggle-btn" class="material-symbols-rounded">light_mode</button>
            <button id="delete-chats-btn" class="material-symbols-rounded">delete</button>
          </div>
        </div>
      </div>
    </div>

    <!-- QR Generator Page -->
    <div class="page" id="qr-generator-page">
      <div class="header">
        <h1 class="header-title">QR Generator</h1>
      </div>

      <!-- Main Container -->
      <div class="container">
        <h2 class="section-title">
          <i class="fas fa-qrcode"></i>
          QR Code Generator
        </h2>
        
        <div class="input-group">
          <div class="label">
            <i class="fas fa-link"></i> Masukkan Teks atau URL
          </div>
          <input type="text" class="input-box" id="text" placeholder="https://example.com atau teks lainnya...">
        </div>
        
        <button class="action-btn-form" onclick="generateQR()">
          <i class="fas fa-bolt"></i> Generate QR Code
        </button>
        
        <div class="qrcode-container" id="qrcodeContainer">
          <div id="qrcode"></div>
          <button class="download-btn" id="downloadBtn" onclick="downloadQR()">
            <i class="fas fa-download"></i> Download QR Code
          </button>
        </div>
      </div>
      
      <!-- Information Section -->
      <div class="info-section">
        <h2 class="section-title">
          <i class="fas fa-info-circle"></i>
          Panduan Penggunaan
        </h2>
        <div class="info-content">
          <h3>    </h3>
          <p>Panel ini memungkinkan Anda untuk membuat QR Code dengan mudah. Berikut adalah panduan lengkapnya:</p>
          
          <ul>
            <li><span class="highlight">Masukkan Teks atau URL</span>: Ketik atau tempel teks atau URL yang ingin Anda ubah menjadi QR Code.</li>
            <li><span class="highlight">Generate QR Code</span>: Klik tombol "Generate QR Code" untuk membuat QR Code.</li>
            <li><span class="highlight">Download QR Code</span>: Setelah QR Code muncul, klik tombol "Download QR Code" untuk menyimpan gambar QR Code.</li>
            <li><span class="highlight">Gunakan QR Code</span>: QR Code yang telah didownload dapat digunakan untuk berbagai keperluan seperti berbagi link, informasi kontak, atau teks lainnya.</li>
          </ul>
          
          <div class="note-box">
            <p><i class="fas fa-lightbulb"></i> <strong>Tips:</strong> QR Code dapat digunakan untuk berbagai keperluan seperti berbagi link, informasi kontak, atau teks lainnya. QR Code yang dibuat dapat dipindai oleh siapa saja menggunakan aplikasi pemindai QR Code di smartphone.</p>
          </div>

          <div class="warning-box">
            <p><i class="fas fa-exclamation-triangle"></i> <strong>Perhatian:</strong> Jangan masukkan informasi sensitif atau rahasia ke dalam QR Code karena QR Code yang dibuat dapat dipindai oleh siapa saja.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- TikTok Downloader Page -->
    <div class="page" id="tiktok-page">
      <div class="header">
        <h1 class="header-title">TikTok Downloader</h1>
      </div>

      <!-- Main Container -->
      <div class="container">
        <h2 class="section-title">
          <i class="fab fa-tiktok"></i>
          TikTok Downloader
        </h2>
        
        <div class="input-group">
          <div class="label">
            <i class="fas fa-link"></i> Masukkan URL TikTok
          </div>
          <input type="text" class="input-box" id="tiktok-url" placeholder="https://www.tiktok.com/@user/video/...">
        </div>
        
        <button class="action-btn-form" id="download-btn">
          <i class="fas fa-download"></i> Download TikTok
        </button>

        <!-- Progress Bar -->
        <div class="progress-container" id="progress-container">
          <div class="progress-bar">
            <div class="progress" id="progress-bar"></div>
          </div>
          <div class="progress-text" id="progress-text">Mempersiapkan download...</div>
        </div>

        <!-- Messages -->
        <div class="error-message hide" id="error-message"></div>
        <div class="success-message hide" id="success-message"></div>
      </div>

      <!-- Result Section -->
      <div class="result-section" id="result-section">
        <h3 class="result-title">
          <i class="fas fa-check-circle"></i>
          Download Siap!
        </h3>

        <div class="video-info" id="video-info" style="display: none;">
          <div class="video-title" id="video-title"></div>
        </div>

        <div class="download-options">
          <a href="#" class="download-option" id="download-video">
            <i class="fas fa-film"></i>
            <span>Download Video</span>
            <small style="color: var(--muted);">HD Quality</small>
          </a>
          <a href="#" class="download-option" id="download-audio">
            <i class="fas fa-music"></i>
            <span>Download Audio</span>
            <small style="color: var(--muted);">MP3 Format</small>
          </a>
        </div>
      </div>

      <!-- Features Section -->
      <div class="features-section">
        <h3 class="features-title">
          <i class="fas fa-sliders-h"></i>
          Fitur Unggulan
        </h3>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <h4 class="feature-title">Super Cepat</h4>
            <p class="feature-desc">
              Download video dalam hitungan detik dengan kecepatan maksimal tanpa batasan.
            </p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-ban"></i>
            </div>
            <h4 class="feature-title">Tanpa Watermark</h4>
            <p class="feature-desc">Video yang didownload tidak ada watermark TikTok, hasil bersih dan profesional.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-video"></i>
            </div>
            <h4 class="feature-title">Kualitas HD</h4>
            <p class="feature-desc">Dapatkan video dalam kualitas terbaik hingga Full HD untuk hasil maksimal.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-shield"></i>
            </div>
            <h4 class="feature-title">100% Aman</h4>
            <p class="feature-desc">Privasi terjamin, tidak menyimpan data atau history download Anda.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- NGL Spam Tool Page -->
    <div class="page" id="ngl-spam-page">
      <div class="header">
        <h1 class="header-title">NGL Spam Tool</h1>
      </div>

      <!-- User Stats Card -->
      <div class="user-stats-card">
        <div class="stats-card">
          <div class="header-icon">
            <div class="user-icon">
              <i class="fa-solid fa-user-group"></i>
            </div>
            <h3>User Information</h3>
          </div>

          <div class="body">
            <div class="user-info-compact">
              <div class="vertical-line"></div>
              <div class="horizontal-line top"></div>

              <div class="info-row">
                <div class="info-label">Username</div>
                <div class="info-separator"></div>
                <div class="info-value" id="usernameDisplay">Loading...</div>
              </div>

              <div class="info-row">
                <div class="info-label">Expired</div>
                <div class="info-separator"></div>
                <div class="info-value" id="expiredDisplay">Loading...</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="header-section">
          <h2><i class="fas fa-message"></i> NGL Spam Tool</h2>
          <p>Tool untuk mengirim pesan ke NGL.link</p>
        </div>
        
        <div style="text-align: center; margin-bottom: 20px;">
          <a href="/ngl-spam/guide" class="guide-btn">
            <i class="fas fa-book-open"></i> Lihat Panduan Lengkap
          </a>
        </div>

        <!-- Limit Info Box -->
        <div class="limit-info">
          <div class="limit-header">
            <i class="fas fa-shield-alt"></i> Limit Harian Kamu
          </div>
          <div class="limit-row">
            <span class="limit-label">Digunakan Hari Ini:</span>
            <span class="limit-value" id="usageToday">0 / 200 pesan</span>
          </div>
          <div class="limit-row">
            <span class="limit-label">Sisa Limit:</span>
            <span class="limit-value" id="remainingLimit">200 pesan</span>
          </div>
          <div class="limit-row">
            <span class="limit-label">Reset:</span>
            <span class="limit-value">Midnight (00:00 WIB)</span>
          </div>
          <div class="limit-row">
            <span class="limit-label">Max Per Request:</span>
            <span class="limit-value">100 pesan</span>
          </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="quick-stats">
          <h3><i class="fas fa-chart-pie"></i> Statistik Penggunaan</h3>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label"><i class="fas fa-user-plus"></i> User Limit</div>
              <div class="stat-number">200</div>
              <div class="stat-label">limit per user</div>
            </div>
            
            <div class="stat-card">
              <div class="stat-label"><i class="fas fa-user"></i> Penggunaan Kamu</div>
              <div class="stat-number" id="usageStat">0<span style="font-size: 14px; color: #888;">/200</span></div>
              <div class="stat-progress">
                <div class="stat-progress-fill" id="usageProgress" style="width: 0%"></div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-label"><i class="fas fa-check-circle"></i> Sisa Limit</div>
              <div class="stat-number" id="remainingStat">200</div>
              <div class="stat-label">pesan tersisa hari ini</div>
            </div>

            <div class="stat-card">
              <div class="stat-label"><i class="fas fa-clock"></i> Reset Dalam</div>
              <div class="stat-number" id="resetTimer">--:--:--</div>
              <div class="stat-label">(Midnight WIB)</div>
            </div>
          </div>
        </div>
        
        <form id="nglForm">
          <div class="form-group">
            <label><i class="fas fa-user"></i> Username Target NGL:</label>
            <input type="text" id="target" placeholder="contoh: username123 (tanpa @)" required>
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-message"></i> Pesan:</label>
            <textarea id="message" rows="3" placeholder="Masukkan pesan yang ingin dikirim..." required></textarea>
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-chart-bar"></i> Jumlah Pesan:</label>
            <input type="number" id="count" value="10" min="1" max="100" required>
            <small style="color: var(--muted);">Maksimal 100 pesan per request | Sisa limit kamu: <span id="remainingCount">200</span></small>
          </div>
          
          <button type="submit" id="submitBtn" class="action-btn-form">
            <i class="fas fa-rocket"></i> Mulai Spam
          </button>
          <div id="limitWarning" style="display: none; color: var(--error); text-align: center; margin-top: 10px;">
             Limit harian kamu sudah habis. Reset di midnight.
          </div>
        </form>
        
        <div class="stats" id="stats" style="display: none;">
          <div class="stat-item">
            <div class="stat-value" id="successCount">0</div>
            <div style="color: var(--success);">Sukses</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="errorCount">0</div>
            <div style="color: var(--error);">Gagal</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="progress">0%</div>
            <div style="color: #ffffff;">Progress</div>
          </div>
        </div>
        
        <div class="progress-bar" id="progressBar" style="display: none;">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="logs" id="logs">
          <div class="log-info"> Menunggu perintah...</div>
        </div>
        
        <a class="back-btn" data-page="dashboard">
          <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
        </a>
      </div>
    </div>

    <!-- Profile Page -->
    <div class="page" id="profile-page">
      <div class="header">
        <h1 class="header-title">Profile</h1>
      </div>
      
      <div class="form-section">
        <h2 class="section-title">
          <i class="fas fa-user"></i>
          Informasi Pengguna
        </h2>
        
        <div class="info-content">
          <div class="info-row" style="margin-bottom: 20px;">
            <div class="info-label">Username:</div>
            <div class="info-value">9XV4 (X0R4)</div>
          </div>
          
          <div class="info-row" style="margin-bottom: 20px;">
            <div class="info-label">Email:</div>
            <div class="info-value">X0R4@gmail.com</div>
          </div>
          
          <div class="info-row" style="margin-bottom: 20px;">
            <div class="info-label">Bergabung Sejak:</div>
            <div class="info-value">1 Januari 2024</div>
          </div>
          
          <div class="info-row" style="margin-bottom: 20px;">
            <div class="info-label">Status:</div>
            <div class="info-value" style="color: var(--success);">Aktif</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Execution Page -->
    <div class="page" id="execution-page">
      <div class="header">
        <h1 class="header-title">Execution</h1>
      </div>
      
      <div class="form-section">
        <h2 class="section-title">
          <i class="fas fa-bolt"></i>
          Execution Tools
        </h2>
        
        <div class="info-content">
          <p>Tools eksekusi untuk berbagai keperluan. Fitur ini sedang dalam pengembangan.</p>
          
          <div class="warning-box">
            <p><i class="fas fa-exclamation-triangle"></i> <strong>Perhatian:</strong> Fitur ini membutuhkan akses khusus dan hanya tersedia untuk pengguna terverifikasi.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Halaman Baru dari Kode Kedua -->
    <!-- Send Account Page -->
    <div class="page" id="send-account-page">
      <div class="header">
        <h1 class="header-title">Kirim Data Akun</h1>
      </div>

      <div class="container">
        <div class="form-section">
          <h2 class="section-title">
            <i class="fas fa-paper-plane"></i>
            Kirim Data Akun
          </h2>
          <form id="send-account-form">
            <div class="label">
              <i class="fas fa-list"></i> Pilih Pesanan:
            </div>
            <select class="input-box" id="order-id" required>
              <option value="">-- Pilih Pesanan --</option>
            </select>

            <div class="label">
              <i class="fas fa-user"></i> Username Akun:
            </div>
            <input type="text" class="input-box" id="account-username" required placeholder="Masukkan username">

            <div class="label">
              <i class="fas fa-lock"></i> Password Akun:
            </div>
            <input type="text" class="input-box" id="account-password" required placeholder="Masukkan password">

            <div class="label">
              <i class="fas fa-globe"></i> Domain Akun:
            </div>
            <input type="text" class="input-box" id="account-domain" required placeholder="Masukkan domain (contoh: example.com)">

            <div class="label">
              <i class="fas fa-sticky-note"></i> Catatan Tambahan:
            </div>
            <textarea class="input-box" id="account-notes" rows="3" placeholder="Informasi tambahan tentang akun"></textarea>

            <button type="submit" class="action-btn-form">
              <i class="fas fa-paper-plane"></i> Kirim Data Akun
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- User Approval Page -->
    <div class="page" id="user-approval-page">
      <div class="header">
        <h1 class="header-title">Approve User</h1>
      </div>

      <div class="container">
        <div class="form-section">
          <h2 class="section-title">
            <i class="fas fa-user-check"></i>
            Persetujuan Pengguna
          </h2>
          <div id="users-list">
            <div class="loading">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Memuat data pengguna...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Topup Approval Page -->
    <div class="page" id="topup-approval-page">
      <div class="header">
        <h1 class="header-title">Approve Top Up</h1>
      </div>

      <div class="container">
        <div class="form-section">
          <h2 class="section-title">
            <i class="fas fa-money-bill-wave"></i>
            Persetujuan Top Up
          </h2>
          <div id="topups-list">
            <div class="loading">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Memuat permintaan top up...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCX4AniDndhJTPrMx8HdTQt1BXvZXldwEw",
      authDomain: "nana-776ae.firebaseapp.com",
      projectId: "nana-776ae",
      storageBucket: "nana-776ae.firebasestorage.app",
      messagingSenderId: "856842447495",
      appId: "1:856842447495:web:4fe3a9d9779ffbd9b7e622"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let orders = [];
    let users = [];
    let topups = [];

    // Loading Screen Logic
    const loadingScreen = document.getElementById("loading");
    const dashboardTab = document.getElementById("dashboard-page");
    const loadingText = document.querySelector(".loading-text");
    const welcomeText = document.getElementById("welcome-text");
    
    const totalLoadTime = 5000; 
    const zoomDuration = 2000; 
    const zoomStartTime = totalLoadTime - zoomDuration; 
    
    // Fungsi untuk menampilkan teks WELCOME dengan animasi satu per satu
    function animateWelcomeText() {
      const text = "W E L C O M E";
      welcomeText.innerHTML = "";
      
      // Tampilkan elemen welcome text
      welcomeText.classList.add("show");
      
      // Buat setiap karakter dengan delay
      for (let i = 0; i < text.length; i++) {
        const char = document.createElement("span");
        char.textContent = text[i];
        char.className = "welcome-char";
        char.style.animationDelay = `${i * 0.1}s`;
        welcomeText.appendChild(char);
      }
    }

    // Jalankan animasi welcome text setelah sedikit delay
    setTimeout(() => {
      animateWelcomeText();
    }, 500);

    setTimeout(() => {
      loadingText.style.opacity = '0';
      loadingScreen.classList.add("zoom-out");
    }, zoomStartTime - 100); 

    setTimeout(() => {
      loadingScreen.style.display = "none";
    }, totalLoadTime);

    // Menu toggle functionality
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    
    function toggleSidebar() {
      sidebar.classList.toggle('active');
      sidebarOverlay.classList.toggle('active');
    }
    
    menuToggle.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);
    
    // Update current time
    function updateCurrentTime() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('id-ID', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      document.getElementById('currentTime').textContent = timeString;
    }
    
    // Navigation functionality
    function showPage(pageId) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      
      // Show selected page
      document.getElementById(pageId).classList.add('active');
      
      // Update active nav link
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      
      // Update active nav link
      document.querySelector(`.nav-link[data-page="${pageId.replace('-page', '')}"]`).classList.add('active');
      
      // Close sidebar on mobile
      if (window.innerWidth < 1024) {
        toggleSidebar();
      }
    }
    
    // Initialize navigation
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const page = this.getAttribute('data-page');
        if (page) {
          showPage(`${page}-page`);
        }
      });
    });
    
    // Dashboard card navigation
    document.querySelectorAll('.dashboard-card').forEach(card => {
      card.addEventListener('click', function() {
        const page = this.getAttribute('data-page');
        if (page) {
          showPage(`${page}-page`);
        }
      });
    });
    
    // Back button functionality
    document.querySelectorAll('.back-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        const page = this.getAttribute('data-page');
        if (page) {
          showPage(`${page}-page`);
        }
      });
    });
    
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      updateCurrentTime();
      
      // Update time every second
      setInterval(updateCurrentTime, 1000);
      
      // Set default time value for iPhone Quote
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('time').value = `${h}:${m}`;
      
      // Initialize Chat AI
      initChatAI();
      
      // Initialize QR Generator
      initQRGenerator();
      
      // Initialize TikTok Downloader
      initTikTokDownloader();
      
      // Initialize NGL Spam Tool
      initNGLSpam();
      
      // Initialize Firebase features
      setupOrdersListener();
      setupUsersListener();
      setupTopupsListener();
      
      // Add animation delay to nav items
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach((item, index) => {
        item.style.setProperty('--item-index', index);
      });
    });
    
    // iPhone Quote Generator functionality
    const generateBtn = document.getElementById('generateBtn');
    const loading = document.getElementById('loading');
    const error = document.getElementById('error');
    const previewArea = document.getElementById('previewArea');
    const previewImage = document.getElementById('previewImage');
    const downloadBtn = document.getElementById('downloadBtn');

    generateBtn.addEventListener('click', async (e) => {
      e.preventDefault();
      const time = document.getElementById('time').value.trim();
      const battery = document.getElementById('battery').value;
      const carrier = document.getElementById('carrier').value.trim();
      const message = document.getElementById('message').value.trim();

      if (!time || !battery || !carrier || !message) {
        showError(' Semua field harus diisi!');
        return;
      }

      error.style.display = 'none';
      previewArea.style.display = 'none';
      loading.style.display = 'block';
      generateBtn.disabled = true;
      generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> PROCESSING...';

      try {
        const url = `https://brat.siputzx.my.id/iphone-quoted?time=${encodeURIComponent(time)}&batteryPercentage=${battery}&carrierName=${encodeURIComponent(carrier)}&messageText=${encodeURIComponent(message)}&emojiStyle=apple`;

        previewImage.onload = function() {
          previewArea.style.display = 'block';
          loading.style.display = 'none';
          generateBtn.disabled = false;
          generateBtn.innerHTML = '<i class="fas fa-rocket"></i> GENERATE QUOTE';

          downloadBtn.onclick = async function(e) {
            e.preventDefault();
            try {
              const response = await fetch(url);
              const blob = await response.blob();
              const downloadUrl = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = downloadUrl;
              a.download = `iphone-quote-${Date.now()}.png`;
              a.click();
              URL.revokeObjectURL(downloadUrl);
            } catch {
              window.open(url, '_blank');
            }
          };
        };

        previewImage.onerror = function() {
          showError(' Gagal memuat gambar.');
          loading.style.display = 'none';
          generateBtn.disabled = false;
          generateBtn.innerHTML = '<i class="fas fa-rocket"></i> GENERATE QUOTE';
        };

        previewImage.src = url;
        downloadBtn.href = url;

      } catch (err) {
        showError('Error: ' + err.message);
      } finally {
        loading.style.display = 'none';
        generateBtn.disabled = false;
        generateBtn.innerHTML = '<i class="fas fa-rocket"></i> GENERATE QUOTE';
      }
    });

    function showError(message) {
      error.textContent = message;
      error.style.display = 'block';
    }
    
    // Chat AI functionality
    function initChatAI() {
      const API_KEY = "AIzaSyBa8WXqsACMZmRP-nE44hwBym1X85dCyCA";
      const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;

      let chatHistory = [];

      // Format AI response
      function formatAIResponse(text) {
        if (!text) return '';
        
        let formattedText = text;
        
        // Handle code blocks with three backticks first
        formattedText = formattedText.replace(/```(\w+)?\n([\s\S]*?)```/g, function(match, language, code) {
          return `<pre><code>${code.trim()}</code></pre>`;
        });

        // Process BOLD (**text**)
        formattedText = formattedText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        
        // Process ITALIC (*text*)
        formattedText = formattedText.replace(/\*(.*?)\*/g, '<em>$1</em>');
        
        // Process HEADINGS (## Heading)
        formattedText = formattedText.replace(/^### (.*$)/gim, '<h3>$1</h3>');
        formattedText = formattedText.replace(/^## (.*$)/gim, '<h2>$1</h2>');
        formattedText = formattedText.replace(/^# (.*$)/gim, '<h1>$1</h1>');
        
        // Process BLOCKQUOTE (> text)
        formattedText = formattedText.replace(/^> (.*$)/gim, '<blockquote>$1</blockquote>');
        
        // Process LISTS
        formattedText = formattedText.replace(/^\* (.*$)/gim, '<li>$1</li>');
        formattedText = formattedText.replace(/^- (.*$)/gim, '<li>$1</li>');
        formattedText = formattedText.replace(/(<li>.*<\/li>)(\s*<li>.*<\/li>)*/gs, '<ul>$&</ul>');
        
        // Process numbered lists
        formattedText = formattedText.replace(/^\d+\. (.*$)/gim, '<li>$1</li>');
        formattedText = formattedText.replace(/(<li>.*<\/li>)(\s*<li>.*<\/li>)*/gs, function(match) {
          if (match.startsWith('<li>') && match.endsWith('</li>')) {
            return '<ol>' + match + '</ol>';
          }
          return match;
        });
        
        // Process INLINE CODE with backticks
        formattedText = formattedText.replace(/`([^`]+)`/g, '<code>$1</code>');
        
        // Process LINKS [text](url)
        formattedText = formattedText.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
        
        // Process LINE BREAKS and PARAGRAPHS
        const lines = formattedText.split('\n');
        let result = [];
        let currentParagraph = [];
        let inList = false;
        
        for (let i = 0; i < lines.length; i++) {
          let line = lines[i].trim();
          
          if (!line) {
            if (currentParagraph.length > 0) {
              result.push('<p>' + currentParagraph.join(' ') + '</p>');
              currentParagraph = [];
            }
            inList = false;
            continue;
          }
          
          // If line is already HTML tag (h1, h2, ul, pre, etc.), push directly
          if (line.startsWith('<h') || line.startsWith('<ul') || line.startsWith('<ol') || 
              line.startsWith('<pre') || line.startsWith('<blockquote') || line.startsWith('<li')) {
            if (currentParagraph.length > 0) {
              result.push('<p>' + currentParagraph.join(' ') + '</p>');
              currentParagraph = [];
            }
            
            // Handle list items
            if (line.startsWith('<li>')) {
              if (!inList) {
                // Determine if it's ordered or unordered list based on context
                const hasNumber = lines[i].match(/^\d+\./);
                result.push(hasNumber ? '<ol>' : '<ul>');
                inList = true;
              }
            } else if (inList && !line.startsWith('<li>')) {
              result.push(inList ? '</ul>' : '</ol>');
              inList = false;
            }
            
            result.push(line);
          } else {
            currentParagraph.push(line);
          }
        }
        
        // Close any open list
        if (inList) {
          result.push('</ul>');
        }
        
        // Don't forget the last paragraph
        if (currentParagraph.length > 0) {
          result.push('<p>' + currentParagraph.join(' ') + '</p>');
        }
        
        return result.join('');
      }

      const chatContainer = document.querySelector(".chats-container");
      const promptInput = document.querySelector(".prompt-input");
      const sendButton = document.querySelector("#send-prompt-btn");
      const suggestions = document.querySelectorAll(".suggestions-item");

      // Scroll to bottom function
      const scrollToBottom = () => {
        chatContainer.scrollTop = chatContainer.scrollHeight;
      };

      // Add message to chat - WITH FORMATTING
      function addMessage(text, isUser = false) {
        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        
        if (isUser) {
          messageDiv.innerHTML = `<div class="message-text">${text}</div>`;
        } else {
          const formattedText = formatAIResponse(text);
          messageDiv.innerHTML = `<div class="message-content">${formattedText}</div>`;
        }
        
        chatContainer.appendChild(messageDiv);
        scrollToBottom();
      }

      // Send message to AI
      async function sendMessage() {
        const message = promptInput.value.trim();
        if (!message) return;

        // Add user message
        addMessage(message, true);
        promptInput.value = "";
        
        // Show typing indicator
        const typingDiv = document.createElement("div");
        typingDiv.className = "message bot-message";
        typingDiv.innerHTML = '<div class="message-content">Mengetik...</div>';
        chatContainer.appendChild(typingDiv);
        scrollToBottom();

        try {
          // Add to history
          chatHistory.push({
            role: "user",
            parts: [{ text: message }]
          });

          // Send to API
          const response = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ contents: chatHistory })
          });

          const data = await response.json();
          
          if (!response.ok) throw new Error(data.error?.message || 'API Error');

          // Remove typing indicator
          chatContainer.removeChild(typingDiv);

          // Add AI response
          const responseText = data.candidates[0].content.parts[0].text;
          addMessage(responseText, false);
          
          // Add to history
          chatHistory.push({
            role: "model", 
            parts: [{ text: responseText }]
          });

        } catch (error) {
          // Remove typing indicator
          chatContainer.removeChild(typingDiv);
          
          // Show error
          addMessage(`Error: ${error.message}`, false);
        }
      }

      // Event listeners
      sendButton.addEventListener('click', sendMessage);
      
      promptInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      // Suggestions click
      suggestions.forEach(suggestion => {
        suggestion.addEventListener('click', function() {
          promptInput.value = this.querySelector('.text').textContent;
          sendMessage();
        });
      });

      // Add welcome message
      setTimeout(() => {
        addMessage("Halo User! Saya AI Assistant. Ada yang bisa saya bantu?", false);
      }, 1000);
    }
    
    // QR Generator functionality
    let qrInstance;

    function initQRGenerator() {
      // Event listener untuk tombol Enter
      document.getElementById("text").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
          generateQR();
        }
      });

      // Auto-focus pada input saat halaman dimuat
      document.getElementById("text").focus();
    }

    function generateQR() {
      const text = document.getElementById("text").value.trim();
      const qrContainer = document.getElementById("qrcode");
      const qrCodeContainer = document.getElementById("qrcodeContainer");
      const downloadBtn = document.getElementById("downloadBtn");

      // Reset state
      qrContainer.innerHTML = "";
      qrCodeContainer.style.display = "none";
      downloadBtn.style.display = "none";

      if (!text) {
        alert(" Masukkan dulu teks atau link!");
        return;
      }

      // Hapus QR code sebelumnya jika ada
      if (qrInstance) {
        qrInstance.clear();
      }

      // Buat QR code baru
      qrInstance = new QRCode(qrContainer, {
        text: text,
        width: 200,
        height: 200,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
      });

      // Tampilkan container dan tombol download
      setTimeout(() => {
        qrCodeContainer.style.display = "block";
        downloadBtn.style.display = "block";
      }, 500);
    }

    function downloadQR() {
      const canvas = document.querySelector("#qrcode canvas");
      if (!canvas) {
        alert(" Generate dulu QR-nya!");
        return;
      }

      // Animasi klik tombol
      const downloadBtn = document.getElementById("downloadBtn");
      downloadBtn.style.transform = "scale(0.95)";
      setTimeout(() => {
        downloadBtn.style.transform = "scale(1)";
      }, 150);

      // Buat canvas baru dengan padding dan watermark
      const padding = 40;
      const newCanvas = document.createElement("canvas");
      const ctx = newCanvas.getContext("2d");
      
      newCanvas.width = canvas.width + (padding * 2);
      newCanvas.height = canvas.height + (padding * 2) + 30; // Extra space for watermark
      
      // Background putih
      ctx.fillStyle = "#ffffff";
      ctx.fillRect(0, 0, newCanvas.width, newCanvas.height);
      
      // Gambar QR di tengah dengan padding
      ctx.drawImage(canvas, padding, padding);
      
      // Tambahkan watermark
      ctx.font = "bold 14px Arial";
      ctx.fillStyle = "#333333";
      ctx.textAlign = "center";
      ctx.fillText("by AiiSigma", newCanvas.width/2, newCanvas.height - 10);
      
      // Download
      const link = document.createElement("a");
      link.href = newCanvas.toDataURL("image/png");
      link.download = "QR_Code_DictiveCore.png";
      link.click();
    }
    
    // TikTok Downloader functionality
    function initTikTokDownloader() {
      const urlInput = document.getElementById('tiktok-url');
      const downloadBtn = document.getElementById('download-btn');
      const progressContainer = document.getElementById('progress-container');
      const progressBar = document.getElementById('progress-bar');
      const progressText = document.getElementById('progress-text');
      const errorMessage = document.getElementById('error-message');
      const successMessage = document.getElementById('success-message');
      const resultSection = document.getElementById('result-section');
      const videoInfo = document.getElementById('video-info');
      const videoTitle = document.getElementById('video-title');
      const downloadVideo = document.getElementById('download-video');
      const downloadAudio = document.getElementById('download-audio');

      let currentVideoData = null;

      // Multiple API endpoints for better reliability
      const API_ENDPOINTS = [
        {
          name: "TikWM",
          url: (url) => `https://www.tikwm.com/api/?url=${encodeURIComponent(url)}`,
          method: "GET",
          parse: (data) => {
            if (data.data) {
              return {
                success: true,
                video: data.data.play || data.data.wmplay,
                music: data.data.music,
                title: data.data.title
              };
            }
            throw new Error("Invalid response format");
          }
        },
        {
          name: "TikDown",
          url: (url) => `https://www.tikdown.org/api/ajaxSearch?url=${encodeURIComponent(url)}&_=${Date.now()}`,
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
            "X-Requested-With": "XMLHttpRequest"
          },
          parse: (data) => {
            if (data.data && data.links) {
              return {
                success: true,
                video: data.links[0]?.a || data.links[0]?.url,
                music: data.music,
                title: data.title
              };
            }
            throw new Error("Invalid response format");
          }
        }
      ];

      function isValidTikTokUrl(url) {
        const patterns = [
          /^https?:\/\/(www\.|vm\.|vt\.)?tiktok\.com\/.+/i,
          /^https?:\/\/([a-z]{2}\.)?tiktok\.com\/@[\w.-]+\/video\/\d+/i,
          /^https?:\/\/vt\.tiktok\.com\/.+/i,
          /^https?:\/\/vm\.tiktok\.com\/.+/i
        ];
        return patterns.some(pattern => pattern.test(url));
      }

      function setLoading(isLoading) {
        downloadBtn.disabled = isLoading;
        downloadBtn.innerHTML = isLoading 
          ? '<i class="fas fa-spinner fa-spin"></i> Memproses...' 
          : '<i class="fas fa-download"></i> Download TikTok';
      }

      function showError(message) {
        errorMessage.textContent = ' ' + message;
        errorMessage.style.display = 'block';
        errorMessage.classList.remove('hide');
        successMessage.style.display = 'none';
        setTimeout(() => {
          errorMessage.classList.add('hide');
          setTimeout(() => (errorMessage.style.display = 'none'), 500);
        }, 5000);
      }

      function showSuccess(message) {
        successMessage.textContent = ' ' + message;
        successMessage.style.display = 'block';
        successMessage.classList.remove('hide');
        errorMessage.style.display = 'none';
        setTimeout(() => {
          successMessage.classList.add('hide');
          setTimeout(() => (successMessage.style.display = 'none'), 500);
        }, 3000);
      }

      function hideMessages() {
        errorMessage.style.display = 'none';
        successMessage.style.display = 'none';
      }

      function updateProgress(percent, text) {
        progressBar.style.width = `${percent}%`;
        progressText.textContent = text;
      }

      async function fetchTikTokData(url) {
        let lastError = null;
        
        for (const endpoint of API_ENDPOINTS) {
          try {
            console.log(`Trying API: ${endpoint.name}`);
            
            const requestOptions = {
              method: endpoint.method,
              headers: endpoint.headers || {}
            };
            
            if (endpoint.method === "POST") {
              requestOptions.body = new URLSearchParams({
                url: url
              });
            }
            
            const response = await fetch(endpoint.url(url), requestOptions);
            
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            console.log(`${endpoint.name} Response:`, data);
            
            const normalizedData = endpoint.parse(data);
            
            if (normalizedData.success) {
              console.log(`Success with ${endpoint.name}`);
              return normalizedData;
            }
            
          } catch (error) {
            console.log(`${endpoint.name} failed:`, error.message);
            lastError = error;
            continue;
          }
        }
        
        throw lastError || new Error("All download APIs failed. Please try again later.");
      }

      function downloadFile(url, filename) {
        // Create a temporary anchor element
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        link.target = '_blank';
        
        // Append to body, click, and remove
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        showSuccess('Download dimulai! Periksa folder download Anda.');
      }

      downloadBtn.addEventListener('click', async () => {
        const url = urlInput.value.trim();

        if (!url) {
          showError('Masukkan URL TikTok terlebih dahulu!');
          return;
        }

        if (!isValidTikTokUrl(url)) {
          showError('URL tidak valid! Pastikan URL dari TikTok.');
          return;
        }

        hideMessages();
        resultSection.style.display = 'none';
        videoInfo.style.display = 'none';
        setLoading(true);
        progressContainer.style.display = 'block';
        updateProgress(20, 'Mengambil data video...');

        try {
          const data = await fetchTikTokData(url);
          updateProgress(60, 'Memproses video...');

          currentVideoData = data;

          if (data.video) {
            downloadVideo.onclick = (e) => {
              e.preventDefault();
              const filename = `tiktok-video-${Date.now()}.mp4`;
              downloadFile(data.video, filename);
            };
            downloadVideo.style.display = 'flex';
          }

          if (data.music) {
            downloadAudio.onclick = (e) => {
              e.preventDefault();
              const filename = `tiktok-audio-${Date.now()}.mp3`;
              downloadFile(data.music, filename);
            };
            downloadAudio.style.display = 'flex';
          } else {
            downloadAudio.style.display = 'none';
          }

          if (data.title) {
            videoTitle.textContent = data.title;
            videoInfo.style.display = 'block';
          }

          updateProgress(100, 'Selesai! Silakan download video Anda.');

          setTimeout(() => {
            progressContainer.style.display = 'none';
            resultSection.style.display = 'block';
            showSuccess('Video berhasil diproses! Klik tombol download di bawah.');
          }, 800);
        } catch (error) {
          console.error('Download error:', error);
          progressContainer.style.display = 'none';

          let errorMsg = 'Gagal mendownload video. ';
          if (error.message.includes('404')) {
            errorMsg += 'Video tidak ditemukan atau sudah dihapus.';
          } else if (error.message.includes('403')) {
            errorMsg += 'Video bersifat privat atau dibatasi.';
          } else if (error.message.includes('All download APIs failed')) {
            errorMsg += 'Semua API sedang down. Silakan coba lagi nanti.';
          } else {
            errorMsg += 'Coba video lain atau gunakan URL yang berbeda.';
          }

          showError(errorMsg);
        } finally {
          setLoading(false);
        }
      });

      // Real-time URL validation and messages reset
      urlInput.addEventListener('input', (e) => {
        const url = e.target.value.trim();
        if (!url) {
          hideMessages();
          return;
        }
        if (!isValidTikTokUrl(url)) {
          showError('URL tidak valid! Pastikan URL dari TikTok Asli.');
        } else {
          hideMessages();
        }
      });

      // Auto-focus on URL input
      urlInput.focus();
    }
    
    // NGL Spam Tool functionality
    function initNGLSpam() {
      // Data user (akan diisi oleh server)
      let userData = {
        username: "XORA",
        expired: "",
        usageToday: 0,
        maxDailyLimit: 200
      };

      // Load user data
      function loadUserData() {
        try {
          document.getElementById('usernameDisplay').textContent = userData.username;
          document.getElementById('expiredDisplay').textContent = userData.expired;
          
          // Update usage stats
          updateUsageStats();
          
        } catch (error) {
          console.error('Gagal memuat data user:', error);
        }
      }
      
      // Update usage statistics
      async function updateUsageStats() {
        try {
          const userUsageToday = userData.usageToday;
          const maxDailyLimit = userData.maxDailyLimit;
          const remaining = maxDailyLimit - userUsageToday;
          const usagePercentage = (userUsageToday / maxDailyLimit) * 100;
          
          // Update tampilan
          document.getElementById('usageToday').textContent = `${userUsageToday} / ${maxDailyLimit} pesan`;
          document.getElementById('remainingLimit').textContent = `${remaining} pesan`;
          document.getElementById('usageStat').innerHTML = `${userUsageToday}<span style="font-size: 14px; color: #888;">/${maxDailyLimit}</span>`;
          document.getElementById('remainingStat').textContent = remaining;
          document.getElementById('remainingCount').textContent = remaining;
          document.getElementById('usageProgress').style.width = `${usagePercentage}%`;
          
          // Update count input max value
          const countInput = document.getElementById('count');
          countInput.max = Math.min(100, remaining);
          
          // Show warning if limit is reached
          if (remaining <= 0) {
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('limitWarning').style.display = 'block';
          } else {
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('limitWarning').style.display = 'none';
          }
          
        } catch (error) {
          console.error('Gagal mengambil data statistik:', error);
        }
      }
      
      // Countdown timer ke midnight
      function updateResetTimer() {
        const now = new Date();
        const midnight = new Date();
        midnight.setHours(24, 0, 0, 0);
        
        const diff = midnight - now;
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        const timerElement = document.getElementById('resetTimer');
        if (timerElement) {
          timerElement.textContent = 
            String(hours).padStart(2, '0') + ':' +
            String(minutes).padStart(2, '0') + ':' +
            String(seconds).padStart(2, '0');
        }
      }

      document.getElementById('nglForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const target = document.getElementById('target').value.trim();
        const message = document.getElementById('message').value.trim();
        const count = parseInt(document.getElementById('count').value);
        
        const submitBtn = document.getElementById('submitBtn');
        const logs = document.getElementById('logs');
        const stats = document.getElementById('stats');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        
        // Validasi
        if (!target || !message) {
          logs.innerHTML = '<div class="log-error"> Semua field harus diisi!</div>';
          return;
        }
        
        if (count < 1 || count > 100) {
          logs.innerHTML = '<div class="log-error"> Jumlah pesan harus antara 1-100!</div>';
          return;
        }
        
        // Reset UI
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        submitBtn.disabled = true;
        logs.innerHTML = '<div class="log-info"> Memulai spam NGL...</div>';
        stats.style.display = 'flex';
        progressBar.style.display = 'block';
        progressFill.style.width = '0%';
        document.getElementById('successCount').textContent = '0';
        document.getElementById('errorCount').textContent = '0';
        document.getElementById('progress').textContent = '0%';
        
        try {
          // Simulasi proses spam NGL
          let success = 0;
          let errors = 0;
          const total = count;
          
          for (let i = 0; i < total; i++) {
            // Simulasi delay
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Simulasi hasil (80% sukses, 20% gagal)
            const isSuccess = Math.random() > 0.2;
            
            if (isSuccess) {
              success++;
              logs.innerHTML += `<div class="log-success"> Pesan ${i+1} berhasil dikirim ke ${target}</div>`;
            } else {
              errors++;
              logs.innerHTML += `<div class="log-error"> Gagal mengirim pesan ${i+1} ke ${target}</div>`;
            }
            
            // Update progress
            const progress = Math.round(((i + 1) / total) * 100);
            progressFill.style.width = `${progress}%`;
            document.getElementById('successCount').textContent = success;
            document.getElementById('errorCount').textContent = errors;
            document.getElementById('progress').textContent = `${progress}%`;
            
            // Scroll ke bottom logs
            logs.scrollTop = logs.scrollHeight;
          }
          
          // Update usage stats setelah berhasil
          userData.usageToday += success;
          updateUsageStats();
          
          logs.innerHTML += `<div class="log-info"> Proses selesai! ${success} berhasil, ${errors} gagal.</div>`;
          
        } catch (error) {
          const errorElement = document.createElement('div');
          errorElement.className = 'log-error';
          errorElement.textContent = ' Error: ' + error.message;
          logs.appendChild(errorElement);
        } finally {
          submitBtn.innerHTML = '<i class="fas fa-rocket"></i> Mulai Spam';
          submitBtn.disabled = false;
        }
      });
      
      // Initialize when page loads
      loadUserData();
      updateResetTimer();
      
      // Update timer every second
      setInterval(updateResetTimer, 1000);
      
      // Auto-update usage stats setiap 30 detik
      setInterval(updateUsageStats, 30000);
    }

    // Firebase functionality untuk fitur seller
    function setupOrdersListener() {
      return db.collection('orders').orderBy('orderDate', 'desc').onSnapshot((snapshot) => {
          orders = [];
          snapshot.forEach((doc) => {
              orders.push({ id: doc.id, ...doc.data() });
          });
          updateOrdersList();
          updateStats();
      });
    }

    function setupUsersListener() {
      return db.collection('users').onSnapshot((snapshot) => {
          users = [];
          snapshot.forEach((doc) => {
              users.push({ id: doc.id, ...doc.data() });
          });
          updateUsersList();
      });
    }

    function setupTopupsListener() {
      return db.collection('topups').orderBy('requestDate', 'desc').onSnapshot((snapshot) => {
          topups = [];
          snapshot.forEach((doc) => {
              topups.push({ id: doc.id, ...doc.data() });
          });
          updateTopupsList();
      });
    }

    function updateStats() {
      const totalOrders = orders.length;
      const pendingOrders = orders.filter(order => order.status !== 'completed').length;
      const completedOrders = orders.filter(order => order.status === 'completed').length;
      
      document.getElementById('total-orders').textContent = totalOrders;
      document.getElementById('pending-orders').textContent = pendingOrders;
      document.getElementById('completed-orders').textContent = completedOrders;
    }

    async function deleteOrder(orderId) {
      if (confirm('Apakah Anda yakin ingin menghapus pesanan ini?')) {
          try {
              await db.collection('orders').doc(orderId).delete();
          } catch (error) {
              console.error('Error deleting order:', error);
              alert('Error menghapus pesanan');
          }
      }
    }

    async function clearAllHistory() {
      if (confirm('Apakah Anda yakin ingin menghapus SEMUA riwayat pesanan? Tindakan ini tidak dapat dibatalkan!')) {
          try {
              const batch = db.batch();
              orders.forEach((order) => {
                  const docRef = db.collection('orders').doc(order.id);
                  batch.delete(docRef);
              });
              await batch.commit();
          } catch (error) {
              console.error('Error clearing history:', error);
              alert('Error menghapus riwayat');
          }
      }
    }

    function updateOrdersList() {
      const ordersList = document.getElementById('orders-list');
      const orderSelect = document.getElementById('order-id');
      
      // Kosongkan select
      orderSelect.innerHTML = '<option value="">-- Pilih Pesanan --</option>';
      
      if (orders.length === 0) {
          ordersList.innerHTML = `
              <div class="empty-state">
                  <i class="fas fa-clipboard-list"></i>
                  <h3>Belum Ada Pesanan</h3>
                  <p>Pesanan dari pembeli akan muncul di sini</p>
              </div>
          `;
          return;
      }
      
      // Tampilkan daftar pesanan
      ordersList.innerHTML = '';
      orders.forEach((order, index) => {
          const orderElement = document.createElement('div');
          orderElement.className = 'order-item';
          orderElement.innerHTML = `
              <div class="order-info">
                  <div>
                      <strong>${order.buyerName || 'Unknown Buyer'}</strong><br>
                      <small>Email: ${order.buyerEmail || 'N/A'}</small><br>
                      <small>Panel: ${order.panelSize || 'N/A'} - Rp ${order.panelPrice ? parseInt(order.panelPrice).toLocaleString('id-ID') : '0'}</small>
                      <br><small>Metode: ${order.paymentMethod || 'N/A'}</small>
                  </div>
                  <div>
                      <span class="status ${order.status === 'completed' ? 'status-completed' : 'status-pending'}">
                          ${order.status === 'completed' ? 'SELESAI' : 'MENUNGGU'}
                      </span>
                  </div>
              </div>
              ${order.proofImage ? `
              <div>
                  <strong>Bukti Transfer:</strong><br>
                  <img src="${order.proofImage}" style="max-width: 100px; margin-top: 5px; border-radius: 5px;">
              </div>
              ` : ''}
              ${order.accountData ? `
              <div style="margin-top: 10px; padding: 10px; background: rgba(0,255,0,0.1); border-radius: 5px;">
                  <strong>Data Akun Terkirim:</strong><br>
                  Username: ${order.accountData.username}<br>
                  Password: ${order.accountData.password}<br>
                  Domain: ${order.accountData.domain}<br>
                  ${order.accountData.notes ? `Catatan: ${order.accountData.notes}` : ''}
              </div>
              ` : ''}
              <div class="order-actions">
                  <button class="btn btn-danger" onclick="deleteOrder('${order.id}')">
                      <i class="fas fa-trash"></i> Hapus Riwayat
                  </button>
              </div>
          `;
          ordersList.appendChild(orderElement);
          
          // Tambahkan ke select jika status masih pending
          if (order.status !== 'completed') {
              const option = document.createElement('option');
              option.value = index;
              option.textContent = `Pesanan dari: ${order.buyerName || 'Unknown'} - ${order.panelSize || 'Unknown Panel'}`;
              orderSelect.appendChild(option);
          }
      });
    }

    function updateUsersList() {
      const usersList = document.getElementById('users-list');
      
      if (users.length === 0) {
          usersList.innerHTML = `
              <div class="empty-state">
                  <i class="fas fa-users"></i>
                  <h3>Belum Ada Pengguna</h3>
                  <p>Pengguna yang mendaftar akan muncul di sini</p>
              </div>
          `;
          return;
      }
      
      // Tampilkan daftar pengguna
      usersList.innerHTML = '';
      users.forEach((user) => {
          const userElement = document.createElement('div');
          userElement.className = 'user-item';
          
          let statusClass = 'status-pending';
          let statusText = 'MENUNGGU';
          
          if (user.status === 'active') {
              statusClass = 'status-active';
              statusText = 'AKTIF';
          } else if (user.status === 'rejected') {
              statusClass = 'status-rejected';
              statusText = 'DITOLAK';
          }
          
          userElement.innerHTML = `
              <div class="user-info">
                  <div>
                      <strong>${user.name || 'Unknown User'}</strong><br>
                      <small>Email: ${user.email || 'N/A'}</small><br>
                      <small>Telepon: ${user.phone || 'N/A'}</small><br>
                      <small>Saldo: Rp ${user.balance ? user.balance.toLocaleString('id-ID') : '0'}</small>
                  </div>
                  <div>
                      <span class="status ${statusClass}">${statusText}</span>
                  </div>
              </div>
              <div class="user-actions">
                  ${user.status === 'pending' ? `
                  <button class="btn btn-success" onclick="approveUser('${user.id}')">
                      <i class="fas fa-check"></i> Setujui
                  </button>
                  <button class="btn btn-danger" onclick="rejectUser('${user.id}')">
                      <i class="fas fa-times"></i> Tolak
                  </button>
                  ` : ''}
                  <button class="btn btn-danger" onclick="deleteUser('${user.id}')">
                      <i class="fas fa-trash"></i> Hapus
                  </button>
              </div>
          `;
          usersList.appendChild(userElement);
      });
    }

    function updateTopupsList() {
      const topupsList = document.getElementById('topups-list');
      
      if (topups.length === 0) {
          topupsList.innerHTML = `
              <div class="empty-state">
                  <i class="fas fa-money-bill-wave"></i>
                  <h3>Belum Ada Permintaan Top Up</h3>
                  <p>Permintaan top up akan muncul di sini</p>
              </div>
          `;
          return;
      }
      
      // Tampilkan daftar top up
      topupsList.innerHTML = '';
      topups.forEach((topup) => {
          const topupElement = document.createElement('div');
          topupElement.className = 'topup-item';
          
          let statusClass = 'status-pending';
          let statusText = 'MENUNGGU';
          
          if (topup.status === 'completed') {
              statusClass = 'status-completed';
              statusText = 'SELESAI';
          } else if (topup.status === 'rejected') {
              statusClass = 'status-rejected';
              statusText = 'DITOLAK';
          }
          
          topupElement.innerHTML = `
              <div class="topup-info">
                  <div>
                      <strong>${topup.userName || 'Unknown User'}</strong><br>
                      <small>Jumlah: Rp ${topup.amount ? topup.amount.toLocaleString('id-ID') : '0'}</small><br>
                      <small>Tanggal: ${new Date(topup.requestDate).toLocaleDateString('id-ID')}</small><br>
                      ${topup.note ? `<small>Catatan: ${topup.note}</small>` : ''}
                  </div>
                  <div>
                      <span class="status ${statusClass}">${statusText}</span>
                  </div>
              </div>
              ${topup.proofImage ? `
              <div>
                  <strong>Bukti Transfer:</strong><br>
                  <img src="${topup.proofImage}" style="max-width: 100px; margin-top: 5px; border-radius: 5px;">
              </div>
              ` : ''}
              <div class="topup-actions">
                  ${topup.status === 'pending' ? `
                  <button class="btn btn-success" onclick="approveTopup('${topup.id}', '${topup.userId}', ${topup.amount})">
                      <i class="fas fa-check"></i> Setujui
                  </button>
                  <button class="btn btn-danger" onclick="rejectTopup('${topup.id}')">
                      <i class="fas fa-times"></i> Tolak
                  </button>
                  ` : ''}
                  <button class="btn btn-danger" onclick="deleteTopup('${topup.id}')">
                      <i class="fas fa-trash"></i> Hapus
                  </button>
              </div>
          `;
          topupsList.appendChild(topupElement);
      });
    }

    async function approveUser(userId) {
      try {
          await db.collection('users').doc(userId).update({
              status: 'active'
          });
          alert('Pengguna berhasil disetujui!');
      } catch (error) {
          console.error('Error approving user:', error);
          alert('Error menyetujui pengguna');
      }
    }

    async function rejectUser(userId) {
      try {
          await db.collection('users').doc(userId).update({
              status: 'rejected'
          });
          alert('Pengguna berhasil ditolak!');
      } catch (error) {
          console.error('Error rejecting user:', error);
          alert('Error menolak pengguna');
      }
    }

    async function deleteUser(userId) {
      if (confirm('Apakah Anda yakin ingin menghapus pengguna ini?')) {
          try {
              await db.collection('users').doc(userId).delete();
              alert('Pengguna berhasil dihapus!');
          } catch (error) {
              console.error('Error deleting user:', error);
              alert('Error menghapus pengguna');
          }
      }
    }

    async function approveTopup(topupId, userId, amount) {
      try {
          // Update topup status
          await db.collection('topups').doc(topupId).update({
              status: 'completed',
              processedDate: new Date().toISOString()
          });
          
          // Get user data
          const userDoc = await db.collection('users').doc(userId).get();
          if (userDoc.exists) {
              const userData = userDoc.data();
              const newBalance = (userData.balance || 0) + amount;
              
              // Update user balance
              await db.collection('users').doc(userId).update({
                  balance: newBalance
              });
          }
          
          alert('Top up berhasil disetujui dan saldo telah ditambahkan!');
      } catch (error) {
          console.error('Error approving topup:', error);
          alert('Error menyetujui top up');
      }
    }

    async function rejectTopup(topupId) {
      try {
          await db.collection('topups').doc(topupId).update({
              status: 'rejected',
              processedDate: new Date().toISOString()
          });
          alert('Top up berhasil ditolak!');
      } catch (error) {
          console.error('Error rejecting topup:', error);
          alert('Error menolak top up');
      }
    }

    async function deleteTopup(topupId) {
      if (confirm('Apakah Anda yakin ingin menghapus permintaan top up ini?')) {
          try {
              await db.collection('topups').doc(topupId).delete();
              alert('Permintaan top up berhasil dihapus!');
          } catch (error) {
              console.error('Error deleting topup:', error);
              alert('Error menghapus permintaan top up');
          }
      }
    }

    // Kirim data akun ke pembeli
    document.getElementById('send-account-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const orderIndex = parseInt(document.getElementById('order-id').value);
      const username = document.getElementById('account-username').value;
      const password = document.getElementById('account-password').value;
      const domain = document.getElementById('account-domain').value;
      const notes = document.getElementById('account-notes').value;
      
      if (isNaN(orderIndex)) {
          alert('Pilih pesanan terlebih dahulu!');
          return;
      }
      
      if (orderIndex >= orders.length) {
          alert('Pesanan tidak valid!');
          return;
      }
      
      const order = orders[orderIndex];
      
      try {
          // Update data pesanan di Firebase
          await db.collection('orders').doc(order.id).update({
              status: 'completed',
              accountData: {
                  username: username,
                  password: password,
                  domain: domain,
                  notes: notes,
                  sentAt: new Date().toISOString()
              }
          });
          
          // Reset form
          this.reset();
          
          alert('Data akun berhasil dikirim ke pembeli!');
      } catch (error) {
          console.error('Error updating order:', error);
          alert('Error mengirim data akun');
      }
    });
  </script>
</body>
</html>